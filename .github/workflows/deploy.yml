Run ssh ***@*** << 'EOF'
  ssh ***@*** << 'EOF'
    set -euxo pipefail
  
    APP_DIR="/home/***/imt-hyderabad-api/public_html"
  
    echo "ðŸ“‚ Go to app directory"
    cd "$APP_DIR"
  
    echo "ðŸ” Mark repo as safe"
    git config --global --add safe.directory "$APP_DIR"
  
    echo "ðŸ“¥ Pull latest code"
    git pull origin main
  
    echo "ðŸ“¦ Install dependencies"
    npm install --production
  
    echo "ðŸ”„ Restart PM2 (reload env)"
    pm2 restart imt-hyderabad-api --update-env
  
    echo "ðŸ’¾ Save PM2 state"
    pm2 save
  
    echo "âœ… DEPLOY SUCCESS"
  EOF
  shell: /usr/bin/bash -e {0}
Pseudo-terminal will not be allocated because stdin is not a terminal.
client_loop: send disconnect: Broken pipe
Error: Process completed with exit code 255.  
